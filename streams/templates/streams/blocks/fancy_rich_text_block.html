{% load wagtailimages_tags wagtailcore_tags %}

<div class="fancy-rich-text
  {% if self.color.text_color %} text-color-{{ self.color.text_color }}{% endif %}
  {% if self.color.background_color or self.color.background_image %} bg {% endif %}
  {% if self.color.background_color and not self.color.background_image %} bg-color-{{ self.color.background_color }}{% endif %}
  {% if self.fixed_dimensions.use %} fixed{% endif %}
"
  {% if self.fixed_dimensions.use %}
    style="height: {{ self.fixed_dimensions.height }}px; width: {{ self.fixed_dimensions.width }}px"
  {% endif %}
>
  {{ self.text|richtext }}
  {% if self.color.background_image %}
    <div class="background-image-container">
      {% image self.color.background_image original class="background-image" %}
    </div>
  {% endif %}
</div>
