{% load wagtailcore_tags wagtailimages_tags streams_tags %}
<div class="sidebar-layout {{ self.sidebar_alignment }}">
  {% width_from_arbitrary_parent 1000 self.sidebar_width 0 as my_width %}
  {# NOTE: We set a max-width here so that any text in the sidebar won't make it grow wider than the images. #}
  <div class="sidebar-layout__sidebar" style="max-width: {{ my_width }}px; float: {{ self.sidebar_alignment }};">
    {% for block in self.sidebar %}
      <section class="block-{{ block.block_type }}">
        {% include_block block with parent_width=my_width parent_height=self.fixed_height parent_gutter_width=self.gutter_width %}
      </section>
    {% endfor %}
  </div>
  <div class="sidebar-layout__rich-text">
    {{ self.text|richtext }}
  </div>
</div>
